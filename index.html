<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸¯å±‹ç”ºç­‹ã‚¯ã‚¤ã‚º</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="start-screen" class="screen active">
        <h1>å¸¯å±‹ç”ºç­‹ã‚¯ã‚¤ã‚ºã«æŒ‘æˆ¦ï¼</h1>
        <p>ãƒã‚¹ã‚¿ãƒ¼ã«ã‚ã‚‹5ã¤ã®ã‚¯ã‚¤ã‚ºã‹ã‚‰ã€æŒ‘æˆ¦ã—ãŸã„ã‚¯ã‚¤ã‚ºã‚’ä¸€ã¤é¸ã‚“ã§ãã ã•ã„ï¼</p>
        <div id="quiz-selection-buttons">
            </div>
    </div>

    <div id="quiz-screen" class="screen">
        <h2 id="quiz-title"></h2>
        <p id="question-text"></p>
        
        <div id="audio-container" style="display: none; margin: 20px 0;">
            <audio id="quiz-audio" controls></audio>
        </div>

        <div id="options-container">
            </div>
    </div>

    <div id="result-screen" class="screen">
        <h2 id="result-message"></h2>
        <p>ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</p>
        <button id="restart-button">åˆ¥ã®ã‚¯ã‚¤ã‚ºã«æŒ‘æˆ¦ã™ã‚‹</button>
    </div>

    <script src="quiz.js"></script>
    <script>
        // DOMè¦ç´ ã®å–å¾—
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const selectionButtonsContainer = document.getElementById('quiz-selection-buttons');
        const restartButton = document.getElementById('restart-button');

        // ç”»é¢åˆ‡ã‚Šæ›¿ãˆé–¢æ•°
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // é¸æŠãƒœã‚¿ãƒ³ã®åˆæœŸè¡¨ç¤º
        function renderSelectionButtons() {
            selectionButtonsContainer.innerHTML = ''; // ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªã‚¢
            QUIZ_DATA.forEach(quiz => {
                const button = document.createElement('button');
                button.textContent = quiz.title;
                button.classList.add('select-button');
                button.onclick = () => startQuiz(quiz.id);
                selectionButtonsContainer.appendChild(button);
            });
            showScreen('start-screen');
        }

        // ã‚¯ã‚¤ã‚ºé–‹å§‹
        function startQuiz(quizId) {
            selectedQuiz = QUIZ_DATA.find(q => q.id === quizId);

            if (!selectedQuiz) return;

            // ã‚¯ã‚¤ã‚ºç”»é¢ã®è¦ç´ ã‚’æ›´æ–°
            document.getElementById('quiz-title').textContent = selectedQuiz.title;
            document.getElementById('question-text').textContent = selectedQuiz.question;
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = ''; // é¸æŠè‚¢ã‚’ã‚¯ãƒªã‚¢

            // éŸ³å£°å•é¡Œã®å¯¾å¿œ
            const audioContainer = document.getElementById('audio-container');
            const quizAudio = document.getElementById('quiz-audio');
            
            if (selectedQuiz.type === 'audio' && selectedQuiz.audio_src) {
                audioContainer.style.display = 'block';
                quizAudio.src = selectedQuiz.audio_src;
                quizAudio.load(); // éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ­ãƒ¼ãƒ‰
            } else {
                audioContainer.style.display = 'none';
                quizAudio.src = '';
            }

            // é¸æŠè‚¢ãƒœã‚¿ãƒ³ã®ç”Ÿæˆ
            selectedQuiz.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-button');
                button.onclick = () => checkAnswer(option);
                optionsContainer.appendChild(button);
            });

            showScreen('quiz-screen');
        }

        // å›ç­”åˆ¤å®š
        function checkAnswer(selectedOption) {
            const isCorrect = (selectedOption === selectedQuiz.answer);
            const messageElement = document.getElementById('result-message');

            if (isCorrect) {
                messageElement.textContent = 'ğŸ‰ æ­£è§£ã§ã™ï¼å¸¯å±‹ç”ºãƒãƒ‹ã‚¢ï¼';
                messageElement.style.color = 'green';
            } else {
                messageElement.textContent = 'æ®‹å¿µï¼ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†...';
                messageElement.style.color = 'red';
            }

            // æœ€çµ‚çµæœç”»é¢ã«é·ç§»
            showScreen('result-screen');
        }

        // ãƒªã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆé¸æŠç”»é¢ã¸æˆ»ã‚‹ï¼‰ãƒœã‚¿ãƒ³ã®è¨­å®š
        restartButton.onclick = renderSelectionButtons;

        // åˆæœŸåŒ–å‡¦ç†
        document.addEventListener('DOMContentLoaded', renderSelectionButtons);
    </script>
</body>
</html>